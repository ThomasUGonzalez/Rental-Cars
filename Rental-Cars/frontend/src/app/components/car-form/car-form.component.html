<div class="table-container">
  <div class="table-header">
    <h2>{{ isEditMode ? 'Editar Vehículo' : 'Nuevo Vehículo' }}</h2>
  </div>

  <mat-card class="form-card mat-elevation-z4">
    <form [formGroup]="carForm" (ngSubmit)="onSubmit()" class="car-form">
      <mat-card-content>
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Marca</mat-label>
            <input matInput type="text" formControlName="brand" required>
            <mat-error *ngIf="carForm.get('brand')?.hasError('required')">
              La Marca es requerida
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Modelo</mat-label>
            <input matInput type="text" formControlName="model" required>
            <mat-error *ngIf="carForm.get('model')?.hasError('required')">
              El Modelo es requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Año (mayor a 2000)</mat-label>
            <input matInput type="number" formControlName="year" min="2000" required>
            <mat-error *ngIf="carForm.get('year')?.hasError('required')">
              El Año es requerido
            </mat-error>
            <mat-error *ngIf="carForm.get('year')?.hasError('min')">
              El Año mínimo es 2000
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Color</mat-label>
            <input matInput type="text" formControlName="color" required>
            <mat-error *ngIf="carForm.get('color')?.hasError('required')">
              El Color es requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Precio por día</mat-label>
            <input matInput type="number" formControlName="price" min="0" required>
            <span matTextPrefix>$&nbsp;</span>
            <mat-error *ngIf="carForm.get('price')?.hasError('required')">
              El Precio es requerido
            </mat-error>
            <mat-error *ngIf="carForm.get('price')?.hasError('min')">
              El Precio no puede ser negativo
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="w-100">
            <mat-label>URL de la Imagen</mat-label>
            <input matInput formControlName="imageUrl" placeholder="https://ejemplo.com/imagen.png">
          </mat-form-field>

        </div>
        <mat-divider class="divider"></mat-divider>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button type="button" (click)="onCancel()">
          <mat-icon>cancel</mat-icon>
          Cancelar
        </button>
        <button mat-raised-button color="primary" type="submit" [disabled]="!carForm.valid || loading">
          <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
          {{ isEditMode ? 'Actualizar' : 'Crear' }}
        </button>
      </mat-card-actions>
    </form>
  </mat-card>

  <div *ngIf="loading" class="loading-shade">
    <mat-spinner></mat-spinner>
  </div>
</div>